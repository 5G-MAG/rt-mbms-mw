<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>5G-MAG Reference Tools - MBMS Middleware: src/ServiceAnnouncement.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">5G-MAG Reference Tools - MBMS Middleware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ServiceAnnouncement.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ServiceAnnouncement_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// 5G-MAG Reference Tools</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// MBMS Middleware Process</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// Copyright (C) 2021 Klaus Kühnhammer (Österreichische Rundfunksender GmbH &amp; Co KG)</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// Licensed under the License terms and conditions for use, reproduction, and</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// distribution of 5G-MAG software (the “License”).  You may not use this file</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// except in compliance with the License.  You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// https://www.5g-mag.com/reference-tools.  Unless required by applicable law or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// agreed to in writing, software distributed under the License is distributed on</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// or implied.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// </span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// See the License for the specific language governing permissions and limitations</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// under the License.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;regex&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span>     <span class="comment">// std::cin, std::cout</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span>      <span class="comment">// std::get_time</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;ctime&gt;</span>        <span class="comment">// struct std::tm</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;boost/algorithm/string/trim.hpp&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ServiceAnnouncement_8h.html">ServiceAnnouncement.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Service_8h.html">Service.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;Receiver.h&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;seamless/SeamlessContentStream.h&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;spdlog/spdlog.h&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;gmime/gmime.h&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;tinyxml2.h&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;cpprest/base_uri.h&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;gzip/decompress.hpp&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="classMBMS__RT_1_1ServiceAnnouncement.html#afd9dc07b9d7edd92ad66191d89e133a8">   36</a></span>&#160;<a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#afd9dc07b9d7edd92ad66191d89e133a8">MBMS_RT::ServiceAnnouncement::ServiceAnnouncement</a>(<span class="keyword">const</span> libconfig::Config &amp;<a class="code" href="main_8cpp.html#a20ec7182fbefc0a7c4d1f8348253164e">cfg</a>, std::string tmgi,</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                                                  <span class="keyword">const</span> std::string &amp;mcast,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                                                  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> tsi, std::string iface,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                                                  boost::asio::io_service &amp;io_service, <a class="code" href="classMBMS__RT_1_1CacheManagement.html">CacheManagement</a> &amp;cache,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                                                  <span class="keywordtype">bool</span> seamless_switching,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                                                  <a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#a8b2113cc24e9c4fec2a69b5f308754ca">get_service_callback_t</a> get_service,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                                                  <a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#aaa2586d3ea3e66734d08fd8aa1a7e94a">set_service_callback_t</a> set_service)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    : _cfg(<a class="code" href="main_8cpp.html#a20ec7182fbefc0a7c4d1f8348253164e">cfg</a>), _tmgi(std::move(tmgi)), _tsi(tsi), _iface(std::move(iface)), _io_service(io_service), _cache(cache),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;      _flute_thread{}, _seamless(seamless_switching), _get_service(std::move(get_service)),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      _set_service(std::move(set_service)) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;}</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classMBMS__RT_1_1ServiceAnnouncement.html#a01b4bd7a7f3781112e8c3d0ffb53974d">   48</a></span>&#160;<a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#a01b4bd7a7f3781112e8c3d0ffb53974d">MBMS_RT::ServiceAnnouncement::~ServiceAnnouncement</a>() {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  spdlog::info(<span class="stringliteral">&quot;Closing service announcement session with TMGI {}&quot;</span>, _tmgi);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  _flute_receiver.reset();</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordflow">if</span> (_flute_thread.joinable()) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    _flute_thread.join();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="classMBMS__RT_1_1ServiceAnnouncement.html#a947757f4be306a29e77cd0e33900f05a">   61</a></span>&#160;<span class="keyword">auto</span> <a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#a947757f4be306a29e77cd0e33900f05a">MBMS_RT::ServiceAnnouncement::start_flute_receiver</a>(<span class="keyword">const</span> std::string &amp;mcast_address) -&gt; <span class="keywordtype">void</span> {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordtype">size_t</span> delim = mcast_address.find(<span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">if</span> (delim == std::string::npos) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    spdlog::error(<span class="stringliteral">&quot;Invalid multicast address {}&quot;</span>, mcast_address);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  _mcast_addr = mcast_address.substr(0, delim);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  _mcast_port = mcast_address.substr(delim + 1);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  spdlog::info(<span class="stringliteral">&quot;Starting FLUTE receiver on {}:{} for TSI {}&quot;</span>, _mcast_addr, _mcast_port, _tsi);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  _flute_thread = std::thread{[&amp;]() {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    _flute_receiver = std::make_unique&lt;LibFlute::Receiver&gt;(_iface, _mcast_addr, atoi(_mcast_port.c_str()), _tsi,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                                                           _io_service);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    _flute_receiver-&gt;register_completion_callback(</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        [&amp;](std::shared_ptr&lt;LibFlute::File&gt; file) { <span class="comment">//NOLINT</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;          spdlog::info(<span class="stringliteral">&quot;{} (TOI {}) has been received&quot;</span>,</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                       file-&gt;meta().content_location, file-&gt;meta().toi);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;          <span class="keywordflow">if</span> (!_bootstrapped || _toi != file-&gt;meta().toi) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            _toi = file-&gt;meta().toi;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <span class="keywordflow">if</span> (file-&gt;meta().content_type == <span class="stringliteral">&quot;application/x-gzip&quot;</span>) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;              _raw_content = gzip::decompress(file-&gt;buffer(), file-&gt;length());</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;              _raw_content = std::string(file-&gt;buffer());</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            parse_bootstrap(file-&gt;buffer());</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;          }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        });</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }};</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keyword">auto</span></div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="classMBMS__RT_1_1ServiceAnnouncement.html#ae18e009d4e50432e108f6404580c213e">   95</a></span>&#160;<a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#ae18e009d4e50432e108f6404580c213e">MBMS_RT::ServiceAnnouncement::parse_bootstrap</a>(<span class="keyword">const</span> std::string &amp;str) -&gt; <span class="keywordtype">void</span> {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  std::string bootstrap_format = <a class="code" href="namespaceServiceAnnouncementFormatConstants.html#a9a5beb5c70a99a1e89fd04df1b9f59bf">ServiceAnnouncementFormatConstants::DEFAULT</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  _cfg.lookupValue(<span class="stringliteral">&quot;mw.bootstrap_format&quot;</span>, bootstrap_format);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// Add all the SA items including their content to _items</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  _addServiceAnnouncementItems(str);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// Parse MBMS envelope: &lt;metadataEnvelope&gt;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;item: _items) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">if</span> (item.content_type == <a class="code" href="namespaceContentTypeConstants.html#a12d92162c661a93e56610e492d067746">ContentTypeConstants::MBMS_ENVELOPE</a>) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      _handleMbmsEnvelope(item);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// Parse MBMS user service description bundle</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;item: _items) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (item.content_type == <a class="code" href="namespaceContentTypeConstants.html#a7bf1e2444818a64eafdc5cb297d76bae">ContentTypeConstants::MBMS_USER_SERVICE_DESCRIPTION</a>) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      _handleMbmbsUserServiceDescriptionBundle(item, bootstrap_format);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classMBMS__RT_1_1ServiceAnnouncement.html#a2175713ff4a6b632c8853656dc900286">  121</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#a2175713ff4a6b632c8853656dc900286">MBMS_RT::ServiceAnnouncement::_addServiceAnnouncementItems</a>(<span class="keyword">const</span> std::string &amp;str) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  g_mime_init();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keyword">auto</span> stream = g_mime_stream_mem_new_with_buffer(str.c_str(), str.length());</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keyword">auto</span> parser = g_mime_parser_new_with_stream(stream);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  g_object_unref(stream);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keyword">auto</span> mpart = g_mime_parser_construct_part(parser, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  g_object_unref(parser);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keyword">auto</span> iter = g_mime_part_iter_new(mpart);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    GMimeObject *current = g_mime_part_iter_get_current(iter);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    GMimeObject *parent = g_mime_part_iter_get_parent(iter);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (GMIME_IS_PART (current)) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keyword">auto</span> type = std::string(g_mime_content_type_get_mime_type(g_mime_object_get_content_type(current)));</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      std::string location = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">if</span> (g_mime_object_get_header(current, <span class="stringliteral">&quot;Content-Location&quot;</span>)) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        location = std::string(g_mime_object_get_header(current, <span class="stringliteral">&quot;Content-Location&quot;</span>));</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keyword">auto</span> <a class="code" href="main_8cpp.html#abc1fd3a47aea6a8944038c9100eb9135">options</a> = g_mime_format_options_new();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      g_mime_format_options_add_hidden_header(<a class="code" href="main_8cpp.html#abc1fd3a47aea6a8944038c9100eb9135">options</a>, <span class="stringliteral">&quot;Content-Type&quot;</span>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      g_mime_format_options_add_hidden_header(<a class="code" href="main_8cpp.html#abc1fd3a47aea6a8944038c9100eb9135">options</a>, <span class="stringliteral">&quot;Content-Transfer-Encoding&quot;</span>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      g_mime_format_options_add_hidden_header(<a class="code" href="main_8cpp.html#abc1fd3a47aea6a8944038c9100eb9135">options</a>, <span class="stringliteral">&quot;Content-Location&quot;</span>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      std::string content = g_mime_object_to_string(current, <a class="code" href="main_8cpp.html#abc1fd3a47aea6a8944038c9100eb9135">options</a>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      boost::algorithm::trim_left(content);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">if</span> (location != <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        _items.emplace_back(<a class="code" href="structMBMS__RT_1_1ServiceAnnouncement_1_1Item.html">Item</a>{</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            type,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            location,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            0, 0, 0,</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            content</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        });</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  } <span class="keywordflow">while</span> (g_mime_part_iter_next(iter));</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="classMBMS__RT_1_1ServiceAnnouncement.html#a0d01d9dbaf409d65caaffec7096cf589">  165</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#a0d01d9dbaf409d65caaffec7096cf589">MBMS_RT::ServiceAnnouncement::_handleMbmsEnvelope</a>(<span class="keyword">const</span> <a class="code" href="structMBMS__RT_1_1ServiceAnnouncement_1_1Item.html">MBMS_RT::ServiceAnnouncement::Item</a> &amp;item) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    tinyxml2::XMLDocument <a class="code" href="main_8cpp.html#af6164deb8a824f8cb2b9147cfc3174f5">doc</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="main_8cpp.html#af6164deb8a824f8cb2b9147cfc3174f5">doc</a>.Parse(item.<a class="code" href="structMBMS__RT_1_1ServiceAnnouncement_1_1Item.html#a6ca24d4c780b379ff4e97fcab69a94f9">content</a>.c_str());</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keyword">auto</span> envelope = <a class="code" href="main_8cpp.html#af6164deb8a824f8cb2b9147cfc3174f5">doc</a>.FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a3332d4d3f9707d6face0db59a694d070">ServiceAnnouncementXmlElements::METADATA_ENVELOPE</a>);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *i = envelope-&gt;FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a13434378b87997d935c4b1da7a044a64">ServiceAnnouncementXmlElements::ITEM</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;         i != <span class="keyword">nullptr</span>; i = i-&gt;NextSiblingElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a13434378b87997d935c4b1da7a044a64">ServiceAnnouncementXmlElements::ITEM</a>)) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      spdlog::debug(<span class="stringliteral">&quot;uri: {}&quot;</span>, i-&gt;Attribute(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ad9e9f735b2d18401000dc1737a95b3e5">ServiceAnnouncementXmlElements::METADATA_URI</a>));</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;ir: _items) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> (ir.uri == i-&gt;Attribute(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ad9e9f735b2d18401000dc1737a95b3e5">ServiceAnnouncementXmlElements::METADATA_URI</a>)) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          std::stringstream ss_from(i-&gt;Attribute(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ac97e605cf63c59d3f8a09470e477be34">ServiceAnnouncementXmlElements::VALID_FROM</a>));</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;          <span class="keyword">struct </span>std::tm from;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;          ss_from &gt;&gt; std::get_time(&amp;from, <span class="stringliteral">&quot;%Y-%m-%dT%H:%M:%S.%fZ&quot;</span>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;          ir.valid_from = mktime(&amp;from);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          std::stringstream ss_until(i-&gt;Attribute(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ac7eff28819710034d9824e32b084a6f1">ServiceAnnouncementXmlElements::VALID_UNTIL</a>));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          <span class="keyword">struct </span>std::tm until;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          ss_until &gt;&gt; std::get_time(&amp;until, <span class="stringliteral">&quot;%Y-%m-%dT%H:%M:%S.%fZ&quot;</span>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          ir.valid_until = mktime(&amp;until);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;          ir.version = atoi(i-&gt;Attribute(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a7c34294c343c3de3ff76f64c4e632b0d">ServiceAnnouncementXmlElements::VERSION</a>));</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  } <span class="keywordflow">catch</span> (std::exception e) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    spdlog::warn(<span class="stringliteral">&quot;MBMS envelope parsing failed: {}&quot;</span>, e.what());</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="classMBMS__RT_1_1ServiceAnnouncement.html#a2610d6c5986df97ada26bb20a599b4eb">  197</a></span>&#160;<a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#a2610d6c5986df97ada26bb20a599b4eb">MBMS_RT::ServiceAnnouncement::_handleMbmbsUserServiceDescriptionBundle</a>(<span class="keyword">const</span> <a class="code" href="structMBMS__RT_1_1ServiceAnnouncement_1_1Item.html">MBMS_RT::ServiceAnnouncement::Item</a> &amp;item,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                                                                       <span class="keyword">const</span> std::string &amp;bootstrap_format) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    tinyxml2::XMLDocument <a class="code" href="main_8cpp.html#af6164deb8a824f8cb2b9147cfc3174f5">doc</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="main_8cpp.html#af6164deb8a824f8cb2b9147cfc3174f5">doc</a>.Parse(item.<a class="code" href="structMBMS__RT_1_1ServiceAnnouncement_1_1Item.html#a6ca24d4c780b379ff4e97fcab69a94f9">content</a>.c_str());</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">auto</span> bundle = <a class="code" href="main_8cpp.html#af6164deb8a824f8cb2b9147cfc3174f5">doc</a>.FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#afa23c0f977dbbb5528e091d3c8faab88">ServiceAnnouncementXmlElements::BUNDLE_DESCRIPTION</a>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *usd = bundle-&gt;FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ac2a545b6705a8fed7d520be440567714">ServiceAnnouncementXmlElements::USER_SERVICE_DESCRIPTION</a>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;         usd != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;         usd = usd-&gt;NextSiblingElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ac2a545b6705a8fed7d520be440567714">ServiceAnnouncementXmlElements::USER_SERVICE_DESCRIPTION</a>)) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="comment">// Create a new service</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keyword">auto</span> service_id = usd-&gt;Attribute(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a5a7910019757e377eac9298c5cfe33f2">ServiceAnnouncementXmlElements::SERVICE_ID</a>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keyword">auto</span>[service, is_new_service] = _registerService(usd, service_id);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="comment">// Handle the app service element. Will read the master manifest as provided in the SA</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keyword">auto</span> app_service = usd-&gt;FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ad6245aed5eb4e9691a8162006d02c2bd">ServiceAnnouncementXmlElements::APP_SERVICE</a>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      _handleAppService(app_service, service);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="comment">// For the default format we need an alternativeContent attribute to setup the service</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">if</span> (bootstrap_format == <a class="code" href="namespaceServiceAnnouncementFormatConstants.html#a17bc25e858a0733149d7a9d205836de3">ServiceAnnouncementFormatConstants::FIVEG_MAG_BC_UC</a>) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        _setupBy5GMagConfig(app_service, service, usd);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bootstrap_format == <a class="code" href="namespaceServiceAnnouncementFormatConstants.html#a6c05e67cd05b7f48d4bddd04c6e2ad13">ServiceAnnouncementFormatConstants::FIVEG_MAG_LEGACY</a>) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        _setupBy5GMagLegacyFormat(app_service, service, usd);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        _setupByAlternativeContentElement(app_service, service, usd);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">if</span> (is_new_service &amp;&amp; service-&gt;content_streams().size() &gt; 0) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        _set_service(service_id, service);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  } <span class="keywordflow">catch</span> (std::exception e) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    spdlog::warn(<span class="stringliteral">&quot;MBMS user service desription parsing failed: {}&quot;</span>, e.what());</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="keyword">auto</span></div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="classMBMS__RT_1_1ServiceAnnouncement.html#a9f5aaf89a2ba493760a783ca6fc5e602">  241</a></span>&#160;<a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#a9f5aaf89a2ba493760a783ca6fc5e602">MBMS_RT::ServiceAnnouncement::_registerService</a>(tinyxml2::XMLElement *usd, <span class="keyword">const</span> std::string &amp;service_id) -&gt; std::tuple&lt;std::shared_ptr&lt;MBMS_RT::Service&gt;, <span class="keywordtype">bool</span>&gt; {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// Register a new service if we have not seen this service id before</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordtype">bool</span> is_new_service = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keyword">auto</span> service = _get_service(service_id);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">if</span> (service == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    service = std::make_shared&lt;Service&gt;(_cache);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    is_new_service = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// read the names</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *name = usd-&gt;FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ab5dd73dd76a77de31393974b518ebe28">ServiceAnnouncementXmlElements::NAME</a>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;       name != <span class="keyword">nullptr</span>; name = name-&gt;NextSiblingElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ab5dd73dd76a77de31393974b518ebe28">ServiceAnnouncementXmlElements::NAME</a>)) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keyword">auto</span> lang = name-&gt;Attribute(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#aa9ad007efb0d4a51a5de8b4a65fe4a51">ServiceAnnouncementXmlElements::LANG</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keyword">auto</span> namestr = name-&gt;GetText();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span> (lang &amp;&amp; namestr) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      service-&gt;add_name(namestr, lang);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">return</span> {service, is_new_service};</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="classMBMS__RT_1_1ServiceAnnouncement.html#a681928f217a758c82e77966c4a1cd98b">  272</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#a681928f217a758c82e77966c4a1cd98b">MBMS_RT::ServiceAnnouncement::_handleAppService</a>(tinyxml2::XMLElement *app_service,<span class="keyword">const</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                                                     std::shared_ptr&lt;MBMS_RT::Service&gt; &amp;service) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  service-&gt;set_delivery_protocol_from_mime_type(app_service-&gt;Attribute(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ac8aebe5497a206c3442768a867d70b9f">ServiceAnnouncementXmlElements::MIME_TYPE</a>));</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// Now search for the content that corresponds to appServiceDescriptionURI. For instance appServiceDescriptionURI=&quot;http://localhost/watchfolder/manifest.m3u8&quot;</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// The attribute appServiceDescriptionURI of r12:appService references an Application Service Description which may be a Media Presentation Description fragment corresponding to a unified MPD.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;item: _items) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// item.uri is derived from the Content-Location of each entry in the bootstrap file. For HLS we are looking for the content of the master manifest in the bootstrap file:</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (item.uri == app_service-&gt;Attribute(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a3cc492e18ca287f81465fb5326335d43">ServiceAnnouncementXmlElements::APP_SERVICE_DESCRIPTION_URI</a>)) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      web::uri uri(item.uri);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="comment">// remove file, leave only dir</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keyword">const</span> std::string &amp;path = uri.path();</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordtype">size_t</span> spos = path.rfind(<span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keyword">auto</span> base_path = path.substr(0, spos + 1);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="comment">// make relative path: remove leading /</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">if</span> (base_path[0] == <span class="charliteral">&#39;/&#39;</span>) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        base_path.erase(0, 1);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      service-&gt;read_master_manifest(item.content, base_path);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      _base_path = base_path;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="classMBMS__RT_1_1ServiceAnnouncement.html#a81f914f9b2a3057bbfe8f842a81c4da6">  299</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#a81f914f9b2a3057bbfe8f842a81c4da6">MBMS_RT::ServiceAnnouncement::_setupBy5GMagConfig</a>(tinyxml2::XMLElement *app_service,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                                       <span class="keyword">const</span> std::shared_ptr&lt;MBMS_RT::Service&gt; &amp;service,</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                                                       tinyxml2::XMLElement *usd) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  std::vector&lt;std::shared_ptr&lt;ContentStream&gt;&gt; broadcastContentStreams;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  std::vector&lt;std::shared_ptr&lt;SeamlessContentStream&gt;&gt; unicastContentStreams;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">// Create content stream objects for each broadcastAppService::basePattern element.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *delivery_method = usd-&gt;FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a2829c172cb4d1fd77a9e8e4c2802da76">ServiceAnnouncementXmlElements::DELIVERY_METHOD</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;       delivery_method != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;       delivery_method = delivery_method-&gt;NextSiblingElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a2829c172cb4d1fd77a9e8e4c2802da76">ServiceAnnouncementXmlElements::DELIVERY_METHOD</a>)) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keyword">auto</span> sdp_uri = delivery_method-&gt;Attribute(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ac561cf361cbc6a56863d87d5fd87c0bb">ServiceAnnouncementXmlElements::SESSION_DESCRIPTION_URI</a>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// We assume that the master manifest is signaled in the SA and that we can simply replace the .sdp ending with .m3u8 to find the element with the right Content-Location</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keyword">auto</span> manifest_url = std::regex_replace(sdp_uri, std::regex(<span class="stringliteral">&quot;.sdp&quot;</span>), <span class="stringliteral">&quot;.m3u8&quot;</span>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keyword">auto</span> broadcast_app_service = delivery_method-&gt;FirstChildElement(</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="namespaceServiceAnnouncementXmlElements.html#a9d571af305ba0e5d7b773e9b4e325983">ServiceAnnouncementXmlElements::BROADCAST_APP_SERVICE</a>);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span> (broadcast_app_service != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *base_pattern = broadcast_app_service-&gt;FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;           base_pattern != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;           base_pattern = base_pattern-&gt;NextSiblingElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>)) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        std::string broadcast_url = base_pattern-&gt;GetText();</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="comment">// create a content stream</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        std::shared_ptr&lt;ContentStream&gt; cs;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">if</span> (_seamless) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;          cs = std::make_shared&lt;SeamlessContentStream&gt;(broadcast_url, _iface, _io_service, _cache,</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                                                       service-&gt;delivery_protocol(), _cfg);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;          cs = std::make_shared&lt;ContentStream&gt;(broadcast_url, _iface, _io_service, _cache, service-&gt;delivery_protocol(),</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                               _cfg);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;item: _items) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;          <span class="keywordflow">if</span> (item.uri == manifest_url) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            cs-&gt;read_master_manifest(item.content);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;          }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;          <span class="keywordflow">if</span> (item.content_type == <a class="code" href="namespaceContentTypeConstants.html#a6f5b9acf88802b548e1dac8e640224e3">ContentTypeConstants::SDP</a> &amp;&amp;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;              item.uri == sdp_uri) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            cs-&gt;configure_5gbc_delivery_from_sdp(item.content);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;          }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        broadcastContentStreams.push_back(cs);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span> (_seamless) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="comment">// Iterate through unicastAppService elements. If we find a match in identical content we add the CDN information to the existing broadcast content stream</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="comment">// If not we create a new content stream object pointing to the CDN url</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keyword">auto</span> unicast_app_service = delivery_method-&gt;FirstChildElement(</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          <a class="code" href="namespaceServiceAnnouncementXmlElements.html#a6f6584f2c651483147599a22eb67de84">ServiceAnnouncementXmlElements::UNICAST_APP_SERVICE</a>);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">if</span> (unicast_app_service != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *base_pattern = unicast_app_service-&gt;FirstChildElement(</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;             base_pattern != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;             base_pattern = base_pattern-&gt;NextSiblingElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>)) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;          <span class="comment">// For HLS streams base_pattern now holds the url to the media manifest</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;          std::string unicast_url = base_pattern-&gt;GetText();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;          <span class="comment">// Check for identical content entries that contain this base pattern.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">auto</span> *identical_content = app_service-&gt;FirstChildElement(</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;              <a class="code" href="namespaceServiceAnnouncementXmlElements.html#a4e80f2bb0c9ad5fdc6f89e1d12bb2cfb">ServiceAnnouncementXmlElements::IDENTICAL_CONTENT</a>);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;               identical_content != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;               identical_content = identical_content-&gt;NextSiblingElement(</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                   <a class="code" href="namespaceServiceAnnouncementXmlElements.html#a4e80f2bb0c9ad5fdc6f89e1d12bb2cfb">ServiceAnnouncementXmlElements::IDENTICAL_CONTENT</a>)) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            std::shared_ptr&lt;SeamlessContentStream&gt; broadcast_content_stream;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordtype">bool</span> found_identical_element = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> *base_pattern_ic = identical_content-&gt;FirstChildElement(</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                <a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                 base_pattern_ic != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                 base_pattern_ic = base_pattern_ic-&gt;NextSiblingElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>)) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;              <span class="comment">// For HLS streams base_pattern_ic now holds either an url that points to a BC media playlist or to a UC playlist</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;              std::string identical_content_url = base_pattern_ic-&gt;GetText();</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;              <span class="comment">// Check if we have a match of our current unicast url with the url in the identical content element</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;              <span class="comment">// Otherwise check if the current identical content url points to an existing BC element</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;              <span class="keywordflow">if</span> (unicast_url == identical_content_url) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                found_identical_element = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;              } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;element: broadcastContentStreams) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                  <span class="keywordflow">if</span> (element-&gt;base() == identical_content_url) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                    broadcast_content_stream = std::dynamic_pointer_cast&lt;SeamlessContentStream&gt;(element);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                  }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;              }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <span class="comment">// If we found a matching broadcast stream we add the CDN url to this one. Otherwise, we create a new SeamlessContentStream element</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">if</span> (broadcast_content_stream != <span class="keyword">nullptr</span> &amp;&amp; found_identical_element) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;              broadcast_content_stream-&gt;set_cdn_endpoint(unicast_url);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;              std::shared_ptr&lt;SeamlessContentStream&gt; cs = std::make_shared&lt;SeamlessContentStream&gt;(manifest_url, _iface,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                                                                                                  _io_service, _cache,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                                                                                                  service-&gt;delivery_protocol(),</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                                                                                  _cfg);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;              cs-&gt;set_cdn_endpoint(unicast_url);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;              unicastContentStreams.push_back(cs);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;          }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;element: unicastContentStreams) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      service-&gt;add_and_start_content_stream(element);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;element: broadcastContentStreams) {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      service-&gt;add_and_start_content_stream(element);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    spdlog::info(<span class="stringliteral">&quot;Finished SA setup with 5G-MAG Format&quot;</span>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="classMBMS__RT_1_1ServiceAnnouncement.html#a84fc359e0ba058f2419979dce0b5a3b5">  419</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#a84fc359e0ba058f2419979dce0b5a3b5">MBMS_RT::ServiceAnnouncement::_setupBy5GMagLegacyFormat</a>(tinyxml2::XMLElement *app_service,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                                                             <span class="keyword">const</span> std::shared_ptr&lt;MBMS_RT::Service&gt; &amp;service,</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                                             tinyxml2::XMLElement *usd) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  std::vector&lt;std::shared_ptr&lt;ContentStream&gt;&gt; broadcastContentStreams;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">// Create content stream objects for each broadcastAppService::basePattern element.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *delivery_method = usd-&gt;FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a2829c172cb4d1fd77a9e8e4c2802da76">ServiceAnnouncementXmlElements::DELIVERY_METHOD</a>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;       delivery_method != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;       delivery_method = delivery_method-&gt;NextSiblingElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a2829c172cb4d1fd77a9e8e4c2802da76">ServiceAnnouncementXmlElements::DELIVERY_METHOD</a>)) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keyword">auto</span> sdp_uri = delivery_method-&gt;Attribute(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ac561cf361cbc6a56863d87d5fd87c0bb">ServiceAnnouncementXmlElements::SESSION_DESCRIPTION_URI</a>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="comment">// We assume that the master manifest is signaled in the SA and that we can simply replace the .sdp ending with .m3u8 or .mpd to find the element with the right Content-Location</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    std::string manifest_type = service-&gt;delivery_protocol() == <a class="code" href="namespaceMBMS__RT.html#a3e4b9b02e406f5344d8c5ae2c01f3d7ca03688639065c4aa962556d653afbc965">DeliveryProtocol::HLS</a> ? <a class="code" href="namespaceContentTypeConstants.html#ac204e8c8a138d0fde10d33c7b2757b93">ContentTypeConstants::HLS_MANIFEST</a> : <a class="code" href="namespaceContentTypeConstants.html#a94046393ebddff156df1826e2ecc965b">ContentTypeConstants::DASH_MANIFEST</a>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keyword">auto</span> manifest_url = std::regex_replace(sdp_uri, std::regex(<span class="stringliteral">&quot;.sdp&quot;</span>), <span class="stringliteral">&quot;.&quot;</span> + manifest_type);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keyword">auto</span> broadcast_app_service = delivery_method-&gt;FirstChildElement(</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="namespaceServiceAnnouncementXmlElements.html#a9d571af305ba0e5d7b773e9b4e325983">ServiceAnnouncementXmlElements::BROADCAST_APP_SERVICE</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">if</span> (broadcast_app_service != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *base_pattern = broadcast_app_service-&gt;FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;           base_pattern != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;           base_pattern = base_pattern-&gt;NextSiblingElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>)) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        std::string broadcast_url = base_pattern-&gt;GetText();</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="comment">// create a content stream if this is not a base pattern that points to file://</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">if</span> (service-&gt;delivery_protocol() == <a class="code" href="namespaceMBMS__RT.html#a3e4b9b02e406f5344d8c5ae2c01f3d7caabb5fed0e6709fade0ab65c15b790508">DeliveryProtocol::DASH</a> || (service-&gt;delivery_protocol() == <a class="code" href="namespaceMBMS__RT.html#a3e4b9b02e406f5344d8c5ae2c01f3d7ca03688639065c4aa962556d653afbc965">DeliveryProtocol::HLS</a> &amp;&amp; broadcast_url.find(<span class="stringliteral">&quot;file://&quot;</span>) == std::string::npos)) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;          std::shared_ptr&lt;ContentStream&gt; cs;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;          cs = std::make_shared&lt;ContentStream&gt;(broadcast_url, _iface, _io_service, _cache, service-&gt;delivery_protocol(),</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                                               _cfg);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;          cs-&gt;set_base_path(_base_path);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;item: _items) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">if</span> (item.uri == manifest_url &amp;&amp; service-&gt;delivery_protocol() == <a class="code" href="namespaceMBMS__RT.html#a3e4b9b02e406f5344d8c5ae2c01f3d7ca03688639065c4aa962556d653afbc965">DeliveryProtocol::HLS</a>) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;              cs-&gt;read_master_manifest(item.content);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">if</span> (item.content_type == <a class="code" href="namespaceContentTypeConstants.html#a6f5b9acf88802b548e1dac8e640224e3">ContentTypeConstants::SDP</a> &amp;&amp;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                item.uri == sdp_uri) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;              cs-&gt;configure_5gbc_delivery_from_sdp(item.content);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;          }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;          broadcastContentStreams.push_back(cs);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;element: broadcastContentStreams) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      service-&gt;add_and_start_content_stream(element);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    spdlog::info(<span class="stringliteral">&quot;Finished SA setup with 5G-MAG Legacy Format&quot;</span>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;}</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="classMBMS__RT_1_1ServiceAnnouncement.html#af2e8c6d432fbadcfb879ab4734801745">  481</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMBMS__RT_1_1ServiceAnnouncement.html#af2e8c6d432fbadcfb879ab4734801745">MBMS_RT::ServiceAnnouncement::_setupByAlternativeContentElement</a>(tinyxml2::XMLElement *app_service,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                                                                     <span class="keyword">const</span> std::shared_ptr&lt;MBMS_RT::Service&gt; &amp;service,</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                                                                     tinyxml2::XMLElement *usd) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keyword">auto</span> alternative_content = app_service-&gt;FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a8c1e736704c564dcad29c4ec5bc85e11">ServiceAnnouncementXmlElements::ALTERNATIVE_CONTENT</a>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">if</span> (alternative_content != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *base_pattern = alternative_content-&gt;FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;         base_pattern != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;         base_pattern = base_pattern-&gt;NextSiblingElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>)) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      std::string base = base_pattern-&gt;GetText();</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="comment">// create a content stream</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      std::shared_ptr&lt;ContentStream&gt; cs;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">if</span> (_seamless) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        cs = std::make_shared&lt;SeamlessContentStream&gt;(base, _iface, _io_service, _cache,</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                                                     service-&gt;delivery_protocol(), _cfg);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        cs = std::make_shared&lt;ContentStream&gt;(base, _iface, _io_service, _cache, service-&gt;delivery_protocol(),</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                             _cfg);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="comment">// Check for 5GBC delivery method elements</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordtype">bool</span> broadcast_delivery_available = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *delivery_method = usd-&gt;FirstChildElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a2829c172cb4d1fd77a9e8e4c2802da76">ServiceAnnouncementXmlElements::DELIVERY_METHOD</a>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;           delivery_method != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;           delivery_method = delivery_method-&gt;NextSiblingElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a2829c172cb4d1fd77a9e8e4c2802da76">ServiceAnnouncementXmlElements::DELIVERY_METHOD</a>)) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keyword">auto</span> sdp_uri = delivery_method-&gt;Attribute(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#ac561cf361cbc6a56863d87d5fd87c0bb">ServiceAnnouncementXmlElements::SESSION_DESCRIPTION_URI</a>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keyword">auto</span> broadcast_app_service = delivery_method-&gt;FirstChildElement(</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <a class="code" href="namespaceServiceAnnouncementXmlElements.html#a9d571af305ba0e5d7b773e9b4e325983">ServiceAnnouncementXmlElements::BROADCAST_APP_SERVICE</a>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        std::string broadcast_base_pattern = broadcast_app_service-&gt;FirstChildElement(</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>)-&gt;GetText();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">if</span> (broadcast_base_pattern == base) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;item: _items) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="keywordflow">if</span> (item.uri == broadcast_base_pattern) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;              cs-&gt;read_master_manifest(item.content);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="keywordflow">if</span> (item.content_type == <a class="code" href="namespaceContentTypeConstants.html#a6f5b9acf88802b548e1dac8e640224e3">ContentTypeConstants::SDP</a> &amp;&amp;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                item.uri == sdp_uri) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;              broadcast_delivery_available = cs-&gt;configure_5gbc_delivery_from_sdp(item.content);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;          }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="keywordtype">bool</span> unicast_delivery_available = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="comment">// When seamless switching is enabled we check for unicast endpoints as well</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keywordflow">if</span> (_seamless) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">if</span> (!broadcast_delivery_available) {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;          <span class="comment">// No 5G broadcast available. Assume the base pattern is a CDN endpoint.</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;          std::dynamic_pointer_cast&lt;SeamlessContentStream&gt;(cs)-&gt;set_cdn_endpoint(base);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;          unicast_delivery_available = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;          <span class="comment">// Check for identical content entries to find a CDN base pattern</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">auto</span> *identical_content = app_service-&gt;FirstChildElement(</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;              <a class="code" href="namespaceServiceAnnouncementXmlElements.html#a4e80f2bb0c9ad5fdc6f89e1d12bb2cfb">ServiceAnnouncementXmlElements::IDENTICAL_CONTENT</a>);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;               identical_content != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;               identical_content = identical_content-&gt;NextSiblingElement(</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                   <a class="code" href="namespaceServiceAnnouncementXmlElements.html#a4e80f2bb0c9ad5fdc6f89e1d12bb2cfb">ServiceAnnouncementXmlElements::IDENTICAL_CONTENT</a>)) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <span class="keywordtype">bool</span> base_matched = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            std::string found_identical_base;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> *base_pattern = identical_content-&gt;FirstChildElement(</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                <a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                 base_pattern != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                 base_pattern = base_pattern-&gt;NextSiblingElement(<a class="code" href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a>)) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;              std::string identical_base = base_pattern-&gt;GetText();</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;              <span class="keywordflow">if</span> (base == identical_base) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                base_matched = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;              } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                found_identical_base = identical_base;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;              }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordflow">if</span> (base_matched &amp;&amp; found_identical_base.length()) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;              std::dynamic_pointer_cast&lt;SeamlessContentStream&gt;(cs)-&gt;set_cdn_endpoint(found_identical_base);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;          }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="keywordflow">if</span> (unicast_delivery_available || broadcast_delivery_available) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        service-&gt;add_and_start_content_stream(cs);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aServiceAnnouncement_8h_html"><div class="ttname"><a href="ServiceAnnouncement_8h.html">ServiceAnnouncement.h</a></div></div>
<div class="ttc" id="aService_8h_html"><div class="ttname"><a href="Service_8h.html">Service.h</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1CacheManagement_html"><div class="ttname"><a href="classMBMS__RT_1_1CacheManagement.html">MBMS_RT::CacheManagement</a></div><div class="ttdef"><b>Definition:</b> <a href="CacheManagement_8h_source.html#l00025">CacheManagement.h:25</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_a01b4bd7a7f3781112e8c3d0ffb53974d"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#a01b4bd7a7f3781112e8c3d0ffb53974d">MBMS_RT::ServiceAnnouncement::~ServiceAnnouncement</a></div><div class="ttdeci">virtual ~ServiceAnnouncement()</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8cpp_source.html#l00048">ServiceAnnouncement.cpp:48</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_a0d01d9dbaf409d65caaffec7096cf589"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#a0d01d9dbaf409d65caaffec7096cf589">MBMS_RT::ServiceAnnouncement::_handleMbmsEnvelope</a></div><div class="ttdeci">void _handleMbmsEnvelope(const Item &amp;item)</div><div class="ttdoc">Parses the MBMS envelope.</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8cpp_source.html#l00165">ServiceAnnouncement.cpp:165</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_a2175713ff4a6b632c8853656dc900286"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#a2175713ff4a6b632c8853656dc900286">MBMS_RT::ServiceAnnouncement::_addServiceAnnouncementItems</a></div><div class="ttdeci">void _addServiceAnnouncementItems(const std::string &amp;str)</div><div class="ttdoc">Iterates through the service announcement file and adds the different sections/items to the the list ...</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8cpp_source.html#l00121">ServiceAnnouncement.cpp:121</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_a2610d6c5986df97ada26bb20a599b4eb"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#a2610d6c5986df97ada26bb20a599b4eb">MBMS_RT::ServiceAnnouncement::_handleMbmbsUserServiceDescriptionBundle</a></div><div class="ttdeci">void _handleMbmbsUserServiceDescriptionBundle(const Item &amp;item, const std::string &amp;bootstrap_format)</div><div class="ttdoc">Parses the MBMS USD.</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8cpp_source.html#l00197">ServiceAnnouncement.cpp:197</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_a681928f217a758c82e77966c4a1cd98b"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#a681928f217a758c82e77966c4a1cd98b">MBMS_RT::ServiceAnnouncement::_handleAppService</a></div><div class="ttdeci">void _handleAppService(tinyxml2::XMLElement *app_service, const std::shared_ptr&lt; Service &gt; &amp;service)</div><div class="ttdoc">Parse the appService element Spec: Presence of the r12:appService child element of userServiceDescrip...</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8cpp_source.html#l00272">ServiceAnnouncement.cpp:272</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_a81f914f9b2a3057bbfe8f842a81c4da6"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#a81f914f9b2a3057bbfe8f842a81c4da6">MBMS_RT::ServiceAnnouncement::_setupBy5GMagConfig</a></div><div class="ttdeci">void _setupBy5GMagConfig(tinyxml2::XMLElement *app_service, const std::shared_ptr&lt; MBMS_RT::Service &gt; &amp;service, tinyxml2::XMLElement *usd)</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8cpp_source.html#l00299">ServiceAnnouncement.cpp:299</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_a84fc359e0ba058f2419979dce0b5a3b5"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#a84fc359e0ba058f2419979dce0b5a3b5">MBMS_RT::ServiceAnnouncement::_setupBy5GMagLegacyFormat</a></div><div class="ttdeci">void _setupBy5GMagLegacyFormat(tinyxml2::XMLElement *app_service, const std::shared_ptr&lt; MBMS_RT::Service &gt; &amp;service, tinyxml2::XMLElement *usd)</div><div class="ttdoc">Setup according to the format that was used for the first 5G-MAG sample recordings.</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8cpp_source.html#l00419">ServiceAnnouncement.cpp:419</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_a8b2113cc24e9c4fec2a69b5f308754ca"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#a8b2113cc24e9c4fec2a69b5f308754ca">MBMS_RT::ServiceAnnouncement::get_service_callback_t</a></div><div class="ttdeci">std::function&lt; std::shared_ptr&lt; Service &gt;const std::string &amp;service_id)&gt; get_service_callback_t</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8h_source.html#l00034">ServiceAnnouncement.h:34</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_a947757f4be306a29e77cd0e33900f05a"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#a947757f4be306a29e77cd0e33900f05a">MBMS_RT::ServiceAnnouncement::start_flute_receiver</a></div><div class="ttdeci">void start_flute_receiver(const std::string &amp;mcast_address)</div><div class="ttdoc">Starts the FLUTE receiver at the specified multicast address.</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8cpp_source.html#l00061">ServiceAnnouncement.cpp:61</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_a9f5aaf89a2ba493760a783ca6fc5e602"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#a9f5aaf89a2ba493760a783ca6fc5e602">MBMS_RT::ServiceAnnouncement::_registerService</a></div><div class="ttdeci">std::tuple&lt; std::shared_ptr&lt; MBMS_RT::Service &gt;, bool &gt; _registerService(tinyxml2::XMLElement *usd, const std::string &amp;service_id)</div><div class="ttdoc">Creates a new service or finds an existing service for the specified service id.</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8cpp_source.html#l00241">ServiceAnnouncement.cpp:241</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_aaa2586d3ea3e66734d08fd8aa1a7e94a"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#aaa2586d3ea3e66734d08fd8aa1a7e94a">MBMS_RT::ServiceAnnouncement::set_service_callback_t</a></div><div class="ttdeci">std::function&lt; void(const std::string &amp;service_id, std::shared_ptr&lt; Service &gt;)&gt; set_service_callback_t</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8h_source.html#l00035">ServiceAnnouncement.h:35</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_ae18e009d4e50432e108f6404580c213e"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#ae18e009d4e50432e108f6404580c213e">MBMS_RT::ServiceAnnouncement::parse_bootstrap</a></div><div class="ttdeci">void parse_bootstrap(const std::string &amp;str)</div><div class="ttdoc">Parse the service announcement/bootstrap file.</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8cpp_source.html#l00095">ServiceAnnouncement.cpp:95</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_af2e8c6d432fbadcfb879ab4734801745"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#af2e8c6d432fbadcfb879ab4734801745">MBMS_RT::ServiceAnnouncement::_setupByAlternativeContentElement</a></div><div class="ttdeci">void _setupByAlternativeContentElement(tinyxml2::XMLElement *app_service, const std::shared_ptr&lt; MBMS_RT::Service &gt; &amp;service, tinyxml2::XMLElement *usd)</div><div class="ttdoc">Setup according to original SA format with an alternativeContentElement required to indicate that the...</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8cpp_source.html#l00481">ServiceAnnouncement.cpp:481</a></div></div>
<div class="ttc" id="aclassMBMS__RT_1_1ServiceAnnouncement_html_afd9dc07b9d7edd92ad66191d89e133a8"><div class="ttname"><a href="classMBMS__RT_1_1ServiceAnnouncement.html#afd9dc07b9d7edd92ad66191d89e133a8">MBMS_RT::ServiceAnnouncement::ServiceAnnouncement</a></div><div class="ttdeci">ServiceAnnouncement(const libconfig::Config &amp;cfg, std::string tmgi, const std::string &amp;mcast, unsigned long long tsi, std::string iface, boost::asio::io_service &amp;io_service, CacheManagement &amp;cache, bool seamless_switching, get_service_callback_t get_service, set_service_callback_t set_service)</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8cpp_source.html#l00036">ServiceAnnouncement.cpp:36</a></div></div>
<div class="ttc" id="amain_8cpp_html_a20ec7182fbefc0a7c4d1f8348253164e"><div class="ttname"><a href="main_8cpp.html#a20ec7182fbefc0a7c4d1f8348253164e">cfg</a></div><div class="ttdeci">static Config cfg</div><div class="ttdoc">Global configuration object.</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00111">main.cpp:111</a></div></div>
<div class="ttc" id="amain_8cpp_html_abc1fd3a47aea6a8944038c9100eb9135"><div class="ttname"><a href="main_8cpp.html#abc1fd3a47aea6a8944038c9100eb9135">options</a></div><div class="ttdeci">static struct argp_option options[]</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00056">main.cpp:58</a></div></div>
<div class="ttc" id="amain_8cpp_html_af6164deb8a824f8cb2b9147cfc3174f5"><div class="ttname"><a href="main_8cpp.html#af6164deb8a824f8cb2b9147cfc3174f5">doc</a></div><div class="ttdeci">static char doc[]</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00056">main.cpp:56</a></div></div>
<div class="ttc" id="anamespaceContentTypeConstants_html_a12d92162c661a93e56610e492d067746"><div class="ttname"><a href="namespaceContentTypeConstants.html#a12d92162c661a93e56610e492d067746">ContentTypeConstants::MBMS_ENVELOPE</a></div><div class="ttdeci">const std::string MBMS_ENVELOPE</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00022">Constants.h:22</a></div></div>
<div class="ttc" id="anamespaceContentTypeConstants_html_a6f5b9acf88802b548e1dac8e640224e3"><div class="ttname"><a href="namespaceContentTypeConstants.html#a6f5b9acf88802b548e1dac8e640224e3">ContentTypeConstants::SDP</a></div><div class="ttdeci">const std::string SDP</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00026">Constants.h:26</a></div></div>
<div class="ttc" id="anamespaceContentTypeConstants_html_a7bf1e2444818a64eafdc5cb297d76bae"><div class="ttname"><a href="namespaceContentTypeConstants.html#a7bf1e2444818a64eafdc5cb297d76bae">ContentTypeConstants::MBMS_USER_SERVICE_DESCRIPTION</a></div><div class="ttdeci">const std::string MBMS_USER_SERVICE_DESCRIPTION</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00023">Constants.h:23</a></div></div>
<div class="ttc" id="anamespaceContentTypeConstants_html_a94046393ebddff156df1826e2ecc965b"><div class="ttname"><a href="namespaceContentTypeConstants.html#a94046393ebddff156df1826e2ecc965b">ContentTypeConstants::DASH_MANIFEST</a></div><div class="ttdeci">const std::string DASH_MANIFEST</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00028">Constants.h:28</a></div></div>
<div class="ttc" id="anamespaceContentTypeConstants_html_ac204e8c8a138d0fde10d33c7b2757b93"><div class="ttname"><a href="namespaceContentTypeConstants.html#ac204e8c8a138d0fde10d33c7b2757b93">ContentTypeConstants::HLS_MANIFEST</a></div><div class="ttdeci">const std::string HLS_MANIFEST</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00027">Constants.h:27</a></div></div>
<div class="ttc" id="anamespaceMBMS__RT_html_a3e4b9b02e406f5344d8c5ae2c01f3d7ca03688639065c4aa962556d653afbc965"><div class="ttname"><a href="namespaceMBMS__RT.html#a3e4b9b02e406f5344d8c5ae2c01f3d7ca03688639065c4aa962556d653afbc965">MBMS_RT::DeliveryProtocol::HLS</a></div><div class="ttdeci">@ HLS</div></div>
<div class="ttc" id="anamespaceMBMS__RT_html_a3e4b9b02e406f5344d8c5ae2c01f3d7caabb5fed0e6709fade0ab65c15b790508"><div class="ttname"><a href="namespaceMBMS__RT.html#a3e4b9b02e406f5344d8c5ae2c01f3d7caabb5fed0e6709fade0ab65c15b790508">MBMS_RT::DeliveryProtocol::DASH</a></div><div class="ttdeci">@ DASH</div></div>
<div class="ttc" id="anamespaceServiceAnnouncementFormatConstants_html_a17bc25e858a0733149d7a9d205836de3"><div class="ttname"><a href="namespaceServiceAnnouncementFormatConstants.html#a17bc25e858a0733149d7a9d205836de3">ServiceAnnouncementFormatConstants::FIVEG_MAG_BC_UC</a></div><div class="ttdeci">const std::string FIVEG_MAG_BC_UC</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00033">Constants.h:33</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementFormatConstants_html_a6c05e67cd05b7f48d4bddd04c6e2ad13"><div class="ttname"><a href="namespaceServiceAnnouncementFormatConstants.html#a6c05e67cd05b7f48d4bddd04c6e2ad13">ServiceAnnouncementFormatConstants::FIVEG_MAG_LEGACY</a></div><div class="ttdeci">const std::string FIVEG_MAG_LEGACY</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00034">Constants.h:34</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementFormatConstants_html_a9a5beb5c70a99a1e89fd04df1b9f59bf"><div class="ttname"><a href="namespaceServiceAnnouncementFormatConstants.html#a9a5beb5c70a99a1e89fd04df1b9f59bf">ServiceAnnouncementFormatConstants::DEFAULT</a></div><div class="ttdeci">const std::string DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00032">Constants.h:32</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_a13434378b87997d935c4b1da7a044a64"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#a13434378b87997d935c4b1da7a044a64">ServiceAnnouncementXmlElements::ITEM</a></div><div class="ttdeci">const char *const ITEM</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00056">Constants.h:56</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_a20a4bf5abf6dcdb414b540ba73deb669"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#a20a4bf5abf6dcdb414b540ba73deb669">ServiceAnnouncementXmlElements::BASE_PATTERN</a></div><div class="ttdeci">const char *const BASE_PATTERN</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00047">Constants.h:47</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_a2829c172cb4d1fd77a9e8e4c2802da76"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#a2829c172cb4d1fd77a9e8e4c2802da76">ServiceAnnouncementXmlElements::DELIVERY_METHOD</a></div><div class="ttdeci">const char *const DELIVERY_METHOD</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00045">Constants.h:45</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_a3332d4d3f9707d6face0db59a694d070"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#a3332d4d3f9707d6face0db59a694d070">ServiceAnnouncementXmlElements::METADATA_ENVELOPE</a></div><div class="ttdeci">const char *const METADATA_ENVELOPE</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00054">Constants.h:54</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_a3cc492e18ca287f81465fb5326335d43"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#a3cc492e18ca287f81465fb5326335d43">ServiceAnnouncementXmlElements::APP_SERVICE_DESCRIPTION_URI</a></div><div class="ttdeci">const char *const APP_SERVICE_DESCRIPTION_URI</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00053">Constants.h:53</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_a4e80f2bb0c9ad5fdc6f89e1d12bb2cfb"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#a4e80f2bb0c9ad5fdc6f89e1d12bb2cfb">ServiceAnnouncementXmlElements::IDENTICAL_CONTENT</a></div><div class="ttdeci">const char *const IDENTICAL_CONTENT</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_a5a7910019757e377eac9298c5cfe33f2"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#a5a7910019757e377eac9298c5cfe33f2">ServiceAnnouncementXmlElements::SERVICE_ID</a></div><div class="ttdeci">const char *const SERVICE_ID</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00043">Constants.h:43</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_a6f6584f2c651483147599a22eb67de84"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#a6f6584f2c651483147599a22eb67de84">ServiceAnnouncementXmlElements::UNICAST_APP_SERVICE</a></div><div class="ttdeci">const char *const UNICAST_APP_SERVICE</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00049">Constants.h:49</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_a7c34294c343c3de3ff76f64c4e632b0d"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#a7c34294c343c3de3ff76f64c4e632b0d">ServiceAnnouncementXmlElements::VERSION</a></div><div class="ttdeci">const char *const VERSION</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00057">Constants.h:57</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_a8c1e736704c564dcad29c4ec5bc85e11"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#a8c1e736704c564dcad29c4ec5bc85e11">ServiceAnnouncementXmlElements::ALTERNATIVE_CONTENT</a></div><div class="ttdeci">const char *const ALTERNATIVE_CONTENT</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00050">Constants.h:50</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_a9d571af305ba0e5d7b773e9b4e325983"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#a9d571af305ba0e5d7b773e9b4e325983">ServiceAnnouncementXmlElements::BROADCAST_APP_SERVICE</a></div><div class="ttdeci">const char *const BROADCAST_APP_SERVICE</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00048">Constants.h:48</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_aa9ad007efb0d4a51a5de8b4a65fe4a51"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#aa9ad007efb0d4a51a5de8b4a65fe4a51">ServiceAnnouncementXmlElements::LANG</a></div><div class="ttdeci">const char *const LANG</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00041">Constants.h:41</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_ab5dd73dd76a77de31393974b518ebe28"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#ab5dd73dd76a77de31393974b518ebe28">ServiceAnnouncementXmlElements::NAME</a></div><div class="ttdeci">const char *const NAME</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00040">Constants.h:40</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_ac2a545b6705a8fed7d520be440567714"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#ac2a545b6705a8fed7d520be440567714">ServiceAnnouncementXmlElements::USER_SERVICE_DESCRIPTION</a></div><div class="ttdeci">const char *const USER_SERVICE_DESCRIPTION</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00042">Constants.h:42</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_ac561cf361cbc6a56863d87d5fd87c0bb"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#ac561cf361cbc6a56863d87d5fd87c0bb">ServiceAnnouncementXmlElements::SESSION_DESCRIPTION_URI</a></div><div class="ttdeci">const char *const SESSION_DESCRIPTION_URI</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00046">Constants.h:46</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_ac7eff28819710034d9824e32b084a6f1"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#ac7eff28819710034d9824e32b084a6f1">ServiceAnnouncementXmlElements::VALID_UNTIL</a></div><div class="ttdeci">const char *const VALID_UNTIL</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00059">Constants.h:59</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_ac8aebe5497a206c3442768a867d70b9f"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#ac8aebe5497a206c3442768a867d70b9f">ServiceAnnouncementXmlElements::MIME_TYPE</a></div><div class="ttdeci">const char *const MIME_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00052">Constants.h:52</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_ac97e605cf63c59d3f8a09470e477be34"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#ac97e605cf63c59d3f8a09470e477be34">ServiceAnnouncementXmlElements::VALID_FROM</a></div><div class="ttdeci">const char *const VALID_FROM</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00058">Constants.h:58</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_ad6245aed5eb4e9691a8162006d02c2bd"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#ad6245aed5eb4e9691a8162006d02c2bd">ServiceAnnouncementXmlElements::APP_SERVICE</a></div><div class="ttdeci">const char *const APP_SERVICE</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00044">Constants.h:44</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_ad9e9f735b2d18401000dc1737a95b3e5"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#ad9e9f735b2d18401000dc1737a95b3e5">ServiceAnnouncementXmlElements::METADATA_URI</a></div><div class="ttdeci">const char *const METADATA_URI</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00055">Constants.h:55</a></div></div>
<div class="ttc" id="anamespaceServiceAnnouncementXmlElements_html_afa23c0f977dbbb5528e091d3c8faab88"><div class="ttname"><a href="namespaceServiceAnnouncementXmlElements.html#afa23c0f977dbbb5528e091d3c8faab88">ServiceAnnouncementXmlElements::BUNDLE_DESCRIPTION</a></div><div class="ttdeci">const char *const BUNDLE_DESCRIPTION</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00039">Constants.h:39</a></div></div>
<div class="ttc" id="astructMBMS__RT_1_1ServiceAnnouncement_1_1Item_html"><div class="ttname"><a href="structMBMS__RT_1_1ServiceAnnouncement_1_1Item.html">MBMS_RT::ServiceAnnouncement::Item</a></div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8h_source.html#l00045">ServiceAnnouncement.h:45</a></div></div>
<div class="ttc" id="astructMBMS__RT_1_1ServiceAnnouncement_1_1Item_html_a6ca24d4c780b379ff4e97fcab69a94f9"><div class="ttname"><a href="structMBMS__RT_1_1ServiceAnnouncement_1_1Item.html#a6ca24d4c780b379ff4e97fcab69a94f9">MBMS_RT::ServiceAnnouncement::Item::content</a></div><div class="ttdeci">std::string content</div><div class="ttdef"><b>Definition:</b> <a href="ServiceAnnouncement_8h_source.html#l00051">ServiceAnnouncement.h:51</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
